import{t as e}from"./IconChevronRight-WzbcZ2yo.js";import{t}from"./IconReload-QbqOpCHe.js";import{$t as n,Bt as r,C as i,Dt as a,Nt as o,Pt as s,Qt as c,Rt as l,S as u,T as d,Zt as f,_n as p,_t as m,a as h,an as g,dn as _,f as v,hn as y,i as b,it as x,ln as S,m as C,mn as w,n as ee,nn as te,nt as ne,ot as T,q as re,r as E,rt as D,s as ie,sn as O,st as k,un as A,vt as ae,w as oe,x as se,xn as ce,zt as j}from"./index-D752YZjA.js";import{n as M}from"./dist-BTO9Qs-M.js";var N=s(`outline`,`brand-speedtest`,`BrandSpeedtest`,[[`path`,{d:`M5.636 19.364a9 9 0 1 1 12.728 0`}],[`path`,{d:`M16 9l-4 4`}]]),P=g(`<div class=mb-2>`),F=g(`<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>`),I=g(`<div class="grid grid-cols-1 place-items-start gap-2">`);const L=e=>{let t=M(),r=w(()=>t.width>480);return()=>{let t=A(()=>e.children),i=e=>t()?.filter((t,n)=>n%2===e).map(e=>(()=>{var t=P();return n(t,e),t})());return k()&&r()?(()=>{var e=F(),t=e.firstChild,r=t.nextSibling;return n(t,()=>i(0)),n(r,()=>i(1)),e})():(()=>{var e=I();return n(e,t),e})()}};var le=g(`<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-box tabs gap-2 tabs-sm"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">`),ue=g(`<button><span></span><div class="badge badge-sm">`),R=g(`<div>`),z=g(`<span class=whitespace-nowrap>`),B=g(`<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="ml-2 badge badge-sm"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-sm badge-primary"><span class=font-bold></span></div><div class="badge badge-sm badge-secondary">/s`),V=g(`<img>`),H=g(`<div class="flex items-center justify-between pr-8"><div class="flex flex-wrap items-center gap-1"><span class="line-clamp-1 break-all"></span><div class="badge badge-sm"></div><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">`),de=g(`<div class="flex flex-col gap-2"><div class="text-sm text-slate-500"> `),U=function(e){return e.proxyProviders=`proxyProviders`,e.proxies=`proxies`,e}(U||{}),W=()=>{let s=v();if(!C())return s(`/setup`,{replace:!0}),null;let c,[g]=m(),{fetchProxies:k,proxies:A,selectProxyInGroup:M,proxyProviders:P,updateProviderByProviderName:F,updateAllProvider:I,proxyGroupLatencyTest:W,proxyProviderLatencyTest:fe,proxyGroupLatencyTestingMap:G,proxyProviderLatencyTestingMap:K,isAllProviderUpdating:q,updatingMap:J}=se(),Y=w(()=>A().filter(e=>!e.hidden)),{speedGroupByName:pe}=re(),[X,Z]=ae(p({}),{name:`collapsedMap`,storage:localStorage}),Q=(e,t)=>{Z(n=>({...n,[e]:t}))};ce(k);let me=async(e,t)=>{e.stopPropagation(),W(t)},he=e=>e.replace(`<svg`,~e.indexOf(`xmlns`)?`<svg`:`<svg xmlns="http://www.w3.org/2000/svg"`).replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/\{/g,`%7B`).replace(/\}/g,`%7D`).replace(/</g,`%3C`).replace(/>/g,`%3E`),ge=(e,t)=>{e.stopPropagation(),fe(t)},_e=(e,t)=>{e.stopPropagation(),F(t)},ve=async e=>{e.stopPropagation(),I()},[$,ye]=p(U.proxies),be=()=>[{type:U.proxies,name:g(`proxies`),count:Y().length},{type:U.proxyProviders,name:g(`proxyProviders`),count:P().length}];return[_(ie,{get children(){return g(`proxies`)}}),(()=>{var s=le(),p=s.firstChild,m=p.firstChild,v=m.nextSibling,C=p.nextSibling;return n(m,_(O,{get each(){return be()},children:e=>(()=>{var t=ue(),i=t.firstChild,a=i.nextSibling;return t.$$click=()=>ye(e.type),n(i,()=>e.name),n(a,()=>e.count),y(()=>f(t,r($()===e.type&&`bg-primary text-neutral!`,`sm:tab-md tab gap-2 px-2`))),t})()})),n(p,_(S,{get when(){return $()===U.proxyProviders},get children(){return _(j,{class:`btn btn-circle btn-sm`,get disabled(){return q()},onClick:e=>ve(e),get icon(){return _(t,{get class(){return r(q()&&`animate-spin text-success`)}})}})}}),v),n(v,_(j,{class:`btn-circle btn-sm btn-primary`,onClick:()=>c?.showModal(),get icon(){return _(o,{})}})),n(C,_(S,{get when(){return $()===U.proxies},get children(){return _(L,{get children(){return _(O,{get each(){return Y()},children:t=>{let o=w(()=>i({proxyNames:d({proxyNames:t.all??[],orderingType:T(),testUrl:t.testUrl||null}),enabled:ne(),testUrl:t.testUrl||null})),s=(()=>{var i=B(),s=i.firstChild,c=s.firstChild,l=c.firstChild,u=l.nextSibling,d=s.nextSibling,f=d.firstChild,p=f.firstChild,m=f.nextSibling,h=m.firstChild;return n(c,_(S,{get when(){return t.icon},get children(){return _(S,{get when(){return t.icon.startsWith(`data:image/svg+xml`)},get fallback(){return(()=>{var e=V();return y(n=>{var r=t.icon,i=`${D()}px`,a=`${x()}px`;return r!==n.e&&te(e,`src`,n.e=r),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),n},{e:void 0,t:void 0,a:void 0}),e})()},get children(){var e=R();return e.style.setProperty(`color`,`oklch(var(--p) / var(--tw-bg-opacity))`),e.style.setProperty(`background-color`,`currentColor`),e.style.setProperty(`mask-size`,`100% 100%`),y(n=>{var r=`${D()}px`,i=`${D()}px`,a=`${x()}px`,o=`url("${he(t.icon)}")`;return r!==n.e&&((n.e=r)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,r)),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`width`):e.style.setProperty(`width`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),o!==n.o&&((n.o=o)==null?e.style.removeProperty(`mask-image`):e.style.setProperty(`mask-image`,o)),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})}}),l),n(l,()=>t.name),n(u,()=>t.all?.length),n(s,_(j,{class:`btn-circle btn-sm`,get disabled(){return G()[t.name]},onClick:e=>me(e,t.name),get icon(){return _(N,{get class(){return r(G()[t.name]&&`animate-pulse text-success`)}})}}),null),n(p,()=>oe(t.type)),n(f,_(S,{get when(){return t.now?.length>0},get children(){return[_(e,{size:18}),(()=>{var e=z();return n(e,()=>t.now),e})()]}}),null),n(m,()=>a(pe()[t.name]??0).toString(),h),n(i,_(S,{get when(){return!X()[t.name]},get children(){return _(E,{get proxyNameList(){return o()},get now(){return t.now},get testUrl(){return t.testUrl||null}})}}),null),i})();return _(l,{get isOpen(){return X()[t.name]},title:s,onCollapse:e=>Q(t.name,e),get children(){return _(O,{get each(){return o()},children:e=>_(b,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void M(t,e)})})}})}})}})}}),null),n(C,_(S,{get when(){return $()===U.proxyProviders},get children(){return _(L,{get children(){return _(O,{get each(){return P()},children:e=>{let i=w(()=>d({orderingType:T(),proxyNames:e.proxies.map(e=>e.name)??[],testUrl:e.testUrl})),a=[(()=>{var i=H(),a=i.firstChild,o=a.firstChild,s=o.nextSibling,c=s.nextSibling,l=a.nextSibling;return n(o,()=>e.name),n(s,()=>e.proxies.length),n(c,()=>e.vehicleType),n(l,_(j,{class:`btn btn-circle btn-sm`,get disabled(){return J()[e.name]},onClick:t=>_e(t,e.name),get icon(){return _(t,{get class(){return r(J()[e.name]&&`animate-spin text-success`)}})}}),null),n(l,_(j,{class:`btn btn-circle btn-sm`,get disabled(){return K()[e.name]},onClick:t=>ge(t,e.name),get icon(){return _(N,{get class(){return r(K()[e.name]&&`animate-pulse text-success`)}})}}),null),i})(),_(ee,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{var t=de(),r=t.firstChild,a=r.firstChild;return n(r,()=>g(`updated`),a),n(r,()=>u(e.updatedAt),null),n(t,_(S,{get when(){return!X()[e.name]},get children(){return _(E,{get proxyNameList(){return i()},get testUrl(){return e.testUrl}})}}),null),t})()];return _(l,{get isOpen(){return X()[e.name]},title:a,onCollapse:t=>Q(e.name,t),get children(){return _(O,{get each(){return i()},children:t=>_(b,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})})}})}})}})}}),null),n(s,_(h,{ref:e=>c=e}),null),s})()]};c([`click`]);export{W as default};